<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kato.8 Studios — Hotdog Hustler Revenue Funnel</title>
  <style>
    :root{
      --bg:#07070b;
      --panel:#0f0f18;
      --panel2:#0c0c14;
      --text:#f3f3ff;
      --muted:#b9b9d6;
      --line:rgba(255,255,255,.12);
      --accent:#ff4fd8;
      --accent2:#6be4ff;
      --good:#8dffb3;
      --warn:#ffd36b;
      --bad:#ff7a7a;
      --shadow: 0 18px 40px rgba(0,0,0,.45);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(900px 500px at 18% -10%, rgba(255,79,216,.20), transparent 65%),
                  radial-gradient(900px 500px at 85% 0%, rgba(107,228,255,.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.35;
    }
    .wrap{ max-width:1200px; margin:0 auto; padding:44px 18px 70px; }
    h1{
      margin:0;
      font-size: clamp(26px, 3vw, 40px);
      letter-spacing:.2px;
    }
    .sub{
      margin:10px 0 0;
      color:var(--muted);
      max-width:980px;
      font-size: 15px;
    }
    .badge-row{ display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; }
    .badge{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      display:inline-flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .dot{ width:8px; height:8px; border-radius:999px; background:var(--accent); box-shadow:0 0 14px rgba(255,79,216,.45); }
    .dot2{ background:var(--accent2); box-shadow:0 0 14px rgba(107,228,255,.35); }
    .dot3{ background:var(--good); box-shadow:0 0 14px rgba(141,255,179,.30); }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      margin-top:18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns:1fr; } }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:16px 16px 12px;
      border-bottom:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,79,216,.10), rgba(255,255,255,0));
    }
    .card .bd{ padding:16px; }

    .kpis{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:12px;
    }
    @media (max-width: 560px){ .kpis{ grid-template-columns:1fr; } }

    .kpi{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background: rgba(0,0,0,.22);
    }
    .kpi .lbl{ font-size:12px; color:var(--muted); }
    .kpi .val{ margin-top:6px; font-size:18px; font-weight:800; letter-spacing:.2px; font-variant-numeric: tabular-nums; }
    .kpi .hint{ margin-top:6px; font-size:12px; color:var(--muted); }

    .section-title{
      font-weight:800;
      letter-spacing:.2px;
      margin:0 0 10px;
      font-size:14px;
    }
    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 680px){ .controls{ grid-template-columns:1fr; } }

    .field{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background: rgba(0,0,0,.18);
    }
    .field label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      color:var(--muted);
      font-size:12px;
      margin-bottom:8px;
    }
    .field input{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color:var(--text);
      padding:10px 12px;
      font-size:13px;
      outline:none;
      font-family: var(--mono);
    }
    .mini{
      color:var(--muted);
      font-size:12px;
      margin-top:8px;
    }
    .callout{
      border:1px dashed rgba(255,79,216,.45);
      background: rgba(255,79,216,.07);
      padding:12px;
      border-radius:16px;
      color:var(--muted);
      font-size:12px;
      margin-top:12px;
    }
    .callout strong{ color:var(--text); }

    .barwrap{
      margin-top:10px;
      display:grid;
      gap:10px;
    }
    .bar{
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
      background: rgba(0,0,0,.18);
    }
    .bar .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.08);
      gap:10px;
    }
    .bar .row:last-child{ border-bottom:0; }
    .bar .name{
      font-size:13px;
      color:var(--text);
      font-weight:700;
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 220px;
    }
    .pill{
      font-size:11px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,.14);
      padding:4px 8px;
      border-radius:999px;
      background: rgba(0,0,0,.20);
      white-space:nowrap;
    }
    .meter{
      flex:1;
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      min-width: 120px;
    }
    .fill{
      height:100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(255,79,216,.95), rgba(107,228,255,.90));
      border-radius:999px;
      box-shadow: 0 0 18px rgba(255,79,216,.20);
    }
    .amt{
      font-family: var(--mono);
      font-size:12px;
      color:var(--text);
      font-variant-numeric: tabular-nums;
      white-space:nowrap;
      font-weight:800;
      min-width: 120px;
      text-align:right;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:10px;
      font-size:13px;
    }
    th, td{
      text-align:left;
      padding:10px 8px;
      border-bottom:1px solid var(--line);
      vertical-align:top;
    }
    th{ color:var(--muted); font-weight:700; font-size:12px; letter-spacing:.2px; }
    tr:last-child td{ border-bottom:0; }
    .money{ font-family: var(--mono); font-variant-numeric: tabular-nums; font-weight:800; white-space:nowrap; }
    .muted{ color:var(--muted); }
    .footer{
      margin-top:16px;
      color:var(--muted);
      font-size:12px;
      border-top:1px solid var(--line);
      padding-top:14px;
    }
    .ok{ color: var(--good); font-weight:800; }
    .warn{ color: var(--warn); font-weight:800; }

    /* Site header (shared styling used on other financials pages) */
    .sitehdr{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      margin-bottom:18px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
    }
    .brand{
      display:flex; flex-direction:column; gap:2px;
    }
    .brand .name{
      font-weight:900; letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    .spark{
      width:10px; height:10px; border-radius:999px;
      background: var(--accent);
      box-shadow:0 0 18px rgba(255,79,216,.45);
      display:inline-block;
    }
    .brand .tag{ font-size:12px; color:var(--muted); }
    .nav{
      display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end;
      align-items:center;
    }
    .nav a{
      color:var(--muted);
      font-size:13px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      text-decoration:none;
    }
    .nav a:hover{
      color:var(--text);
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
  </style>
</head>
<body>
  <div class="sitehdr">
    <div class="brand">
      <div class="name"><span class="spark"></span> <a href="index.html" style="color:var(--text); text-decoration:none;">Kato.8 Studios LLC</a></div>
      <div class="tag">Retro × Modern — in gameplay and aesthetics</div>
    </div>
    <div class="nav">
      <a href="games.html">Games</a>
      <a href="updates.html">Updates</a>
      <a href="about.html">About</a>
      <a href="investor-options.html">Investor Options</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>

  <div class="wrap">
    <h1>Hotdog Hustler — Revenue Funnel Roadmap</h1>
    <p class="sub">
      This page shows how Hotdog Hustler generates cash flow and how Kato.8 allocates that revenue into studio runway and the game pipeline
      (starting with <b>Last Light</b> and expanding to additional titles).
    </p>
    <div class="badge-row">
      <div class="badge"><span class="dot"></span> Pricing roadmap included (Beta: $1 → Full Release: $5)</div>
      <div class="badge"><span class="dot2"></span> Revenue-share model supported (Studio net = % of gross after platform fee)</div>
      <div class="badge"><span class="dot3"></span> Pipeline allocation plan (editable by scenario)</div>
    </div>

    <div class="grid">
      <!-- LEFT: MODEL + FUNNEL -->
      <div class="card">
        <div class="hd">
          <div style="font-weight:900; letter-spacing:.2px">Cash Flow Model</div>
          <div style="color:var(--muted); font-size:12px; margin-top:6px">
            Adjust assumptions below to instantly see the funds available for the pipeline.
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="lbl">Gross Revenue (est.)</div>
              <div class="val" id="kpiGross">$—</div>
              <div class="hint">Units × Price (by phase)</div>
            </div>
            <div class="kpi">
              <div class="lbl">Studio Net (est.)</div>
              <div class="val" id="kpiNet">$—</div>
              <div class="hint">After platform fee + rev-share</div>
            </div>
            <div class="kpi">
              <div class="lbl">Pipeline Funds (est.)</div>
              <div class="val" id="kpiPipeline">$—</div>
              <div class="hint">Net × Allocation %</div>
            </div>
          </div>
        </div>

        <div class="bd">
          <div class="section-title">Assumptions</div>
          <div class="controls">
            <div class="field">
              <label>
                <span>Beta Units Sold</span>
                <span class="pill">Beta price fixed at $1</span>
              </label>
              <input id="betaUnits" type="number" min="0" step="100" value="25000" />
              <div class="mini">Example: 25,000 demo/beta units at $1.</div>
            </div>

            <div class="field">
              <label>
                <span>Full Release Units Sold</span>
                <span class="pill">Full price fixed at $5</span>
              </label>
              <input id="fullUnits" type="number" min="0" step="100" value="50000" />
              <div class="mini">Example: 50,000 units at $5.</div>
            </div>

            <div class="field">
              <label>
                <span>Platform Fee %</span>
                <span class="pill">Editable</span>
              </label>
              <input id="platformFee" type="number" min="0" max="100" step="0.5" value="30" />
              <div class="mini muted">Set to your distribution mix (Steam/itch/others).</div>
            </div>

            <div class="field">
              <label>
                <span>Studio Share % of Post-Platform</span>
                <span class="pill">Revenue Share</span>
              </label>
              <input id="studioShare" type="number" min="0" max="100" step="1" value="50" />
              <div class="mini">Hotdog Hustler rev-share example: Studio keeps 50%.</div>
            </div>

            <div class="field">
              <label>
                <span>Pipeline Allocation % of Studio Net</span>
                <span class="pill">Editable</span>
              </label>
              <input id="allocPipeline" type="number" min="0" max="100" step="1" value="70" />
              <div class="mini">Remaining % can cover studio ops/reserves.</div>
            </div>

            <div class="field">
              <label>
                <span>Studio Ops + Reserve %</span>
                <span class="pill">Auto</span>
              </label>
              <input id="allocOps" type="number" min="0" max="100" step="1" value="30" disabled />
              <div class="mini muted">Calculated as 100% − Pipeline Allocation.</div>
            </div>
          </div>

          <div class="callout" id="healthCallout">
            <strong>Status:</strong> — (update assumptions to see funding readiness)
          </div>

          <div class="section-title" style="margin-top:14px">Funnel: Where Hotdog Hustler Money Goes</div>
          <div class="barwrap" id="funnelBars"></div>

          <div class="footer">
            Tip: This model intentionally stays simple and investor-readable. If you want, we can add a second tab for
            <span class="pill">taxes</span>, <span class="pill">refund rate</span>, <span class="pill">marketing spend</span>,
            and <span class="pill">monthly burn</span> to convert pipeline funds into runway months.
          </div>
        </div>
      </div>

      <!-- RIGHT: ROADMAP + PIPELINE ALLOCATION -->
      <div class="card">
        <div class="hd">
          <div style="font-weight:900; letter-spacing:.2px">Pipeline Roadmap & Allocation</div>
          <div style="color:var(--muted); font-size:12px; margin-top:6px">
            This communicates the “why” behind the funnel: Hotdog Hustler is the cash-flow bridge into larger titles.
          </div>
        </div>

        <div class="bd">
          <div class="section-title">Hotdog Hustler Release Roadmap (Cash-Flow Bridge)</div>
          <table>
            <thead>
              <tr>
                <th style="width:22%">Phase</th>
                <th style="width:18%">Price</th>
                <th style="width:30%">Purpose</th>
                <th style="width:30%">Pipeline Impact</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><b>Beta</b></td>
                <td class="money">$1</td>
                <td class="muted">Validate core loop + retention, gather feedback, build store traction.</td>
                <td class="muted">First funding into <b>Last Light Demo</b> + studio runway.</td>
              </tr>
              <tr>
                <td><b>Full Release</b></td>
                <td class="money">$5</td>
                <td class="muted">Sustainable revenue cycle + marketing beats + long-tail updates.</td>
                <td class="muted">Scale production spend into pipeline titles + stronger demos.</td>
              </tr>
              <tr>
                <td><b>Post-Launch</b></td>
                <td class="money">—</td>
                <td class="muted">Content updates, bundles, seasonal promos (optional).</td>
                <td class="muted">Re-invest into next title milestones or porting budget.</td>
              </tr>
            </tbody>
          </table>

          <div class="section-title" style="margin-top:14px">Pipeline Buckets (Editable Allocation)</div>
          <div class="controls">
            <div class="field">
              <label><span>Last Light (Demo → Production)</span><span class="pill">%</span></label>
              <input id="pLastLight" type="number" min="0" max="100" step="1" value="50" />
              <div class="mini">Primary near-term funnel target.</div>
            </div>
            <div class="field">
              <label><span>Corebound (Concept → Demo)</span><span class="pill">%</span></label>
              <input id="pCorebound" type="number" min="0" max="100" step="1" value="20" />
              <div class="mini">Secondary pipeline investment.</div>
            </div>
            <div class="field">
              <label><span>Next Pipeline Title(s)</span><span class="pill">%</span></label>
              <input id="pNext" type="number" min="0" max="100" step="1" value="15" />
              <div class="mini">Future prototypes, R&D, pre-production.</div>
            </div>
            <div class="field">
              <label><span>Marketing & Community</span><span class="pill">%</span></label>
              <input id="pMkt" type="number" min="0" max="100" step="1" value="15" />
              <div class="mini">Store page, trailer, community growth.</div>
            </div>
          </div>

          <div class="callout" id="allocCallout">
            <strong>Allocation check:</strong> — (must total 100% of pipeline funds)
          </div>


          <!-- =========================
            Hotdog Hustler → Last Light Funding Funnel (Gate Check)
          ========================= -->
          <div class="section-title" style="margin-top:14px">Hotdog Hustler → Last Light Funding Funnel</div>

          <div class="callout" style="margin-top:0;">
            <strong>Milestone gate:</strong> Hotdog Hustler revenue funds the <b>Last Light Demo</b> first (vertical slice validation). Full production scaling is gated until the demo is complete, publicly testable, and ready for Steam-facing beats (page + trailer + feedback).
          </div>

          <div class="kpis" style="margin-top:12px;">
            <div class="kpi">
              <div class="lbl">Allocated to Last Light</div>
              <div class="val" id="llGateAllocated">$—</div>
              <div class="hint">Pipeline funds × Last Light %</div>
            </div>
            <div class="kpi">
              <div class="lbl">Demo Funding Gate</div>
              <div class="val" id="llGateDemo">—</div>
              <div class="hint">$27k–$50k target</div>
            </div>
            <div class="kpi">
              <div class="lbl">Full Game Gate</div>
              <div class="val" id="llGateFull">—</div>
              <div class="hint">$130k–$210k target</div>
            </div>
          </div>

          <table aria-label="Last Light gate targets" style="margin-top:12px;">
            <thead>
              <tr>
                <th style="width:40%">Target</th>
                <th style="width:20%">Low</th>
                <th style="width:20%">High</th>
                <th style="width:20%">Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><b>Last Light Demo</b> (Vertical Slice)</td>
                <td class="money">$27,000</td>
                <td class="money">$50,000</td>
                <td id="llGateDemoRow" class="muted">—</td>
              </tr>
              <tr>
                <td><b>Last Light Full Game</b> (Lean Indie)</td>
                <td class="money">$130,000</td>
                <td class="money">$210,000</td>
                <td id="llGateFullRow" class="muted">—</td>
              </tr>
            </tbody>
          </table>

          <div class="callout" id="llGateCallout">
            <strong>Status:</strong> —
          </div>

          <div class="section-title" style="margin-top:14px">Projected Spend Output (from Pipeline Funds)</div>
          <div class="barwrap" id="pipelineBars"></div>

          <div class="footer">
            <span class="ok">Investor narrative:</span> Hotdog Hustler is designed as the cash-flow engine that reduces funding risk
            for larger titles by converting early sales into milestone progress.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ----------------------------
    // Helpers
    // ----------------------------
    const $ = (id) => document.getElementById(id);
    const money = (n) => {
      if (!isFinite(n)) return "—";
      return "$" + Math.round(n).toLocaleString("en-US");
    };
    const clamp = (n, a, b) => Math.min(b, Math.max(a, n));

    function pct(n){ return clamp(Number(n) || 0, 0, 100); }
    function num(n){ return Math.max(0, Number(n) || 0); }

    // ----------------------------
    // Inputs
    // ----------------------------
    const betaUnits = $("betaUnits");
    const fullUnits = $("fullUnits");
    const platformFee = $("platformFee");
    const studioShare = $("studioShare");
    const allocPipeline = $("allocPipeline");
    const allocOps = $("allocOps");

    const pLastLight = $("pLastLight");
    const pCorebound = $("pCorebound");
    const pNext = $("pNext");
    const pMkt = $("pMkt");

    // Outputs
    const kpiGross = $("kpiGross");
    const kpiNet = $("kpiNet");
    const kpiPipeline = $("kpiPipeline");

    const funnelBars = $("funnelBars");
    const pipelineBars = $("pipelineBars");
    const healthCallout = $("healthCallout");
    const allocCallout = $("allocCallout");

    // Last Light funnel gate outputs
    const llGateAllocated = $("llGateAllocated");
    const llGateDemo = $("llGateDemo");
    const llGateFull = $("llGateFull");
    const llGateDemoRow = $("llGateDemoRow");
    const llGateFullRow = $("llGateFullRow");
    const llGateCallout = $("llGateCallout");

    // ----------------------------
    // Core Model
    // ----------------------------
    const PRICES = {
      beta: 1,
      full: 5
    };

    function compute(){
      // Read
      const bUnits = num(betaUnits.value);
      const fUnits = num(fullUnits.value);

      const feePct = pct(platformFee.value) / 100;
      const sharePct = pct(studioShare.value) / 100;

      const pipelinePct = pct(allocPipeline.value);
      const opsPct = 100 - pipelinePct;
      allocOps.value = opsPct;

      // Gross
      const grossBeta = bUnits * PRICES.beta;
      const grossFull = fUnits * PRICES.full;
      const gross = grossBeta + grossFull;

      // Post-platform
      const postPlatform = gross * (1 - feePct);

      // Studio Net (rev-share applied after platform)
      const studioNet = postPlatform * sharePct;

      // Allocation
      const pipelineFunds = studioNet * (pipelinePct / 100);
      const opsFunds = studioNet * (opsPct / 100);

      // Pipeline split
      const aLL = pct(pLastLight.value);
      const aCB = pct(pCorebound.value);
      const aNX = pct(pNext.value);
      const aMK = pct(pMkt.value);
      const allocTotal = aLL + aCB + aNX + aMK;

      const llFunds = pipelineFunds * (aLL/100);
      const cbFunds = pipelineFunds * (aCB/100);
      const nxFunds = pipelineFunds * (aNX/100);
      const mkFunds = pipelineFunds * (aMK/100);

      return {
        bUnits, fUnits,
        grossBeta, grossFull, gross,
        feePct, sharePct,
        postPlatform,
        studioNet,
        pipelinePct, opsPct,
        pipelineFunds, opsFunds,
        alloc: { aLL, aCB, aNX, aMK, allocTotal },
        pipe: { llFunds, cbFunds, nxFunds, mkFunds }
      };
    }

    function barRow({name, pill, amount, pctOfMax}){
      const row = document.createElement("div");
      row.className = "bar";

      const r = document.createElement("div");
      r.className = "row";

      const left = document.createElement("div");
      left.className = "name";
      left.innerHTML = `${name} <span class="pill">${pill}</span>`;

      const meter = document.createElement("div");
      meter.className = "meter";
      const fill = document.createElement("div");
      fill.className = "fill";
      fill.style.width = `${clamp(pctOfMax, 0, 100)}%`;
      meter.appendChild(fill);

      const amt = document.createElement("div");
      amt.className = "amt";
      amt.textContent = money(amount);

      r.appendChild(left);
      r.appendChild(meter);
      r.appendChild(amt);
      row.appendChild(r);
      return row;
    }

    function render(){
      const m = compute();

      // KPIs
      kpiGross.textContent = money(m.gross);
      kpiNet.textContent = money(m.studioNet);
      kpiPipeline.textContent = money(m.pipelineFunds);

      // Health callout (simple readiness messaging)
      // Targets based on your demo tiers: Tier 1 starts around $120k, Tier 2 around $220k, Tier 3 around $350k
      let status = "Not yet at demo-funding threshold.";
      let toneClass = "warn";
      if (m.pipelineFunds >= 350000) { status = "Tier 3-capable funding (showpiece demo / early production start)."; toneClass = "ok"; }
      else if (m.pipelineFunds >= 220000) { status = "Tier 2-capable funding (recommended polished vertical slice)."; toneClass = "ok"; }
      else if (m.pipelineFunds >= 120000) { status = "Tier 1-capable funding (lean demo)."; toneClass = "ok"; }
      else if (m.pipelineFunds >= 60000) { status = "Approaching Tier 1 demo funding; may require partial funding + scope control."; toneClass = "warn"; }

      healthCallout.innerHTML = `<strong>Status:</strong> <span class="${toneClass}">${status}</span>
        <div style="margin-top:6px">
          <span class="muted">This compares pipeline funds against demo budget tiers (Tier 1: $120k+, Tier 2: $220k+, Tier 3: $350k+).</span>
        </div>`;

      // Funnel Bars
      funnelBars.innerHTML = "";
      const maxFunnel = Math.max(m.gross, m.postPlatform, m.studioNet, m.pipelineFunds, m.opsFunds, 1);

      funnelBars.appendChild(barRow({
        name: "Gross Revenue",
        pill: `Beta $1 + Full $5`,
        amount: m.gross,
        pctOfMax: (m.gross / maxFunnel) * 100
      }));
      funnelBars.appendChild(barRow({
        name: "After Platform Fee",
        pill: `${Math.round(m.feePct*100)}% fee`,
        amount: m.postPlatform,
        pctOfMax: (m.postPlatform / maxFunnel) * 100
      }));
      funnelBars.appendChild(barRow({
        name: "Studio Net (Rev-Share)",
        pill: `${Math.round(m.sharePct*100)}% share`,
        amount: m.studioNet,
        pctOfMax: (m.studioNet / maxFunnel) * 100
      }));
      funnelBars.appendChild(barRow({
        name: "Pipeline Funds",
        pill: `${m.pipelinePct}% allocated`,
        amount: m.pipelineFunds,
        pctOfMax: (m.pipelineFunds / maxFunnel) * 100
      }));
      funnelBars.appendChild(barRow({
        name: "Studio Ops + Reserve",
        pill: `${m.opsPct}% allocated`,
        amount: m.opsFunds,
        pctOfMax: (m.opsFunds / maxFunnel) * 100
      }));

      // Allocation check
      const ok = Math.abs(m.alloc.allocTotal - 100) < 0.001;
      allocCallout.innerHTML = `<strong>Allocation check:</strong>
        <span class="${ok ? "ok" : "warn"}">${ok ? "OK" : "Needs adjustment"}</span>
        <div style="margin-top:6px">
          <span class="muted">Your pipeline split totals <b>${m.alloc.allocTotal.toFixed(0)}%</b>. It must equal <b>100%</b>.</span>
        </div>`;

      // Pipeline Bars
      pipelineBars.innerHTML = "";
      const maxPipe = Math.max(m.pipelineFunds, m.pipe.llFunds, m.pipe.cbFunds, m.pipe.nxFunds, m.pipe.mkFunds, 1);

      pipelineBars.appendChild(barRow({
        name: "Pipeline Total",
        pill: `${m.pipelinePct}% of net`,
        amount: m.pipelineFunds,
        pctOfMax: (m.pipelineFunds / maxPipe) * 100
      }));
      pipelineBars.appendChild(barRow({
        name: "Last Light",
        pill: `${m.alloc.aLL}%`,
        amount: m.pipe.llFunds,
        pctOfMax: (m.pipe.llFunds / maxPipe) * 100
      }));
      pipelineBars.appendChild(barRow({
        name: "Corebound",
        pill: `${m.alloc.aCB}%`,
        amount: m.pipe.cbFunds,
        pctOfMax: (m.pipe.cbFunds / maxPipe) * 100
      }));
      pipelineBars.appendChild(barRow({
        name: "Next Title(s)",
        pill: `${m.alloc.aNX}%`,
        amount: m.pipe.nxFunds,
        pctOfMax: (m.pipe.nxFunds / maxPipe) * 100
      }));
      pipelineBars.appendChild(barRow({
        name: "Marketing & Community",
        pill: `${m.alloc.aMK}%`,
        amount: m.pipe.mkFunds,
        pctOfMax: (m.pipe.mkFunds / maxPipe) * 100
      }));


      // ----------------------------
      // Hotdog Hustler → Last Light Gate Check (uses Last Light allocation)
      // ----------------------------
      if (llGateAllocated && llGateDemo && llGateFull && llGateDemoRow && llGateFullRow && llGateCallout){
        const allocatedLL = m.pipe.llFunds;

        const demoLow = 27000, demoHigh = 50000;
        const fullLow = 130000, fullHigh = 210000;

        llGateAllocated.textContent = money(allocatedLL);

        const demoStatus = (allocatedLL >= demoHigh) ? "Met (High)" : (allocatedLL >= demoLow) ? "Met (Low)" : "Not Yet";
        const fullStatus = (allocatedLL >= fullHigh) ? "Met (High)" : (allocatedLL >= fullLow) ? "Met (Low)" : "Not Yet";

        llGateDemo.textContent = demoStatus;
        llGateFull.textContent = fullStatus;

        llGateDemo.style.color = (allocatedLL >= demoLow) ? "var(--good)" : "var(--warn)";
        llGateFull.style.color = (allocatedLL >= fullLow) ? "var(--good)" : "var(--warn)";

        llGateDemoRow.textContent = demoStatus;
        llGateFullRow.textContent = fullStatus;
        llGateDemoRow.style.color = (allocatedLL >= demoLow) ? "var(--good)" : "var(--warn)";
        llGateFullRow.style.color = (allocatedLL >= fullLow) ? "var(--good)" : "var(--warn)";

        if (allocatedLL >= demoHigh){
          llGateCallout.innerHTML = `<strong>Status:</strong> <span class="ok">Demo funding gate met (high).</span> Last Light can begin vertical slice production with full validation budget coverage.`;
        } else if (allocatedLL >= demoLow){
          llGateCallout.innerHTML = `<strong>Status:</strong> <span class="ok">Demo funding gate met (low).</span> Remaining gap to demo high: <b>${money(demoHigh - allocatedLL)}</b>.`;
        } else {
          llGateCallout.innerHTML = `<strong>Status:</strong> <span class="warn">Demo funding gate not met yet.</span> Gap to demo low: <b>${money(demoLow - allocatedLL)}</b> • gap to demo high: <b>${money(demoHigh - allocatedLL)}</b>.`;
        }
      }

    }

    // Auto-normalize pipeline allocation inputs to 100% (optional convenience)
    function normalizePipelineSplit(changed){
      const vals = {
        ll: pct(pLastLight.value),
        cb: pct(pCorebound.value),
        nx: pct(pNext.value),
        mk: pct(pMkt.value)
      };
      const keys = ["ll","cb","nx","mk"];
      const total = keys.reduce((s,k)=>s+vals[k],0);

      // If total is 0, set a default
      if (total === 0){
        pLastLight.value = 50;
        pCorebound.value = 20;
        pNext.value = 15;
        pMkt.value = 15;
        return;
      }

      // Keep the changed field fixed, scale others to sum to 100
      const fixedKeyMap = {
        "pLastLight":"ll",
        "pCorebound":"cb",
        "pNext":"nx",
        "pMkt":"mk"
      };
      const fixedKey = fixedKeyMap[changed] || null;
      if (!fixedKey) return;

      const fixedVal = vals[fixedKey];
      const otherKeys = keys.filter(k => k !== fixedKey);
      const otherSum = otherKeys.reduce((s,k)=>s+vals[k],0);

      const remaining = Math.max(0, 100 - fixedVal);
      if (otherSum === 0){
        // distribute evenly
        const each = remaining / otherKeys.length;
        vals[otherKeys[0]] = each;
        vals[otherKeys[1]] = each;
        vals[otherKeys[2]] = each;
      } else {
        otherKeys.forEach(k => {
          vals[k] = (vals[k] / otherSum) * remaining;
        });
      }

      // write back rounded ints (keeps UX clean)
      pLastLight.value = Math.round(vals.ll);
      pCorebound.value = Math.round(vals.cb);
      pNext.value = Math.round(vals.nx);
      pMkt.value = Math.round(vals.mk);

      // fix rounding drift to 100 by adjusting the largest non-fixed
      const after = pct(pLastLight.value)+pct(pCorebound.value)+pct(pNext.value)+pct(pMkt.value);
      const drift = 100 - after;
      if (drift !== 0){
        const candidates = ["pLastLight","pCorebound","pNext","pMkt"].filter(id => fixedKeyMap[id] !== fixedKey);
        // find max among candidates
        let best = candidates[0];
        candidates.forEach(id => { if (pct($(id).value) > pct($(best).value)) best = id; });
        $(best).value = clamp(pct($(best).value) + drift, 0, 100);
      }
    }

    // Wire up inputs
    // Listen for both 'input' and 'change' to ensure recalculation across UI interactions
    [betaUnits, fullUnits, platformFee, studioShare, allocPipeline].forEach(el => {
      ["input", "change"].forEach(ev => el.addEventListener(ev, () => { render(); }));
    });

    // Pipeline split inputs: normalize and re-render on input or change
    [pLastLight, pCorebound, pNext, pMkt].forEach(el => {
      ["input", "change"].forEach(ev => el.addEventListener(ev, (e) => {
        normalizePipelineSplit(e.target.id);
        render();
      }));
    });

    // Also trigger initial render
    render();
   </script>
  </div>

  <footer class="footer">
    <div class="container footer__inner">
      <div>
        <div class="footer__brand">© <span id="year"></span> Kato.8 Studios LLC</div>
        <div class="footer__meta">Crowdfunding • Game-only funding • Milestone updates</div>
      </div>
      <div class="footer__right">
        <a href="invest.html">Invest in Games</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
  </footer>
</main>

<script>
  // Auto-update year in footer
  document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>
